
{{ partial "styles/style-global.html" . }}
{{ partial "styles/style-sidebar.html" . }}
{{ partial "styles/style-sidebar-right.html" . }}
{{ partial "styles/style-article.html" . }}
{{ partial "styles/style-menu.html" . }}
{{ partial "styles/style-sidebar-categories.html" . }}
{{ partial "styles/style-mainblocks.html" . }}

<style>
    @keyframes cascade-reveal {
        0% {
            opacity: 0;
            transform: translateY(-20px); /* 初始位置在上方 */
            filter: blur(5px); /* 可选：加一点模糊感，更像全息投影 */
        }
        100% {
            opacity: 1;
            transform: translateY(0);
            filter: blur(0);
        }
    }

    
    .main-container > header,
    .taxonomy-header {
        animation: cascade-reveal 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
        animation-delay: 0.1s;
    }

    /* ============================================================
       CASE A: 主页 / 普通列表 (Standard Layout)
       这里的“框”就是 <article> 本身
       ============================================================ */
    .article-list:not(.article-list--compact) article {
        animation: cascade-reveal 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
        will-change: transform, opacity;
    }

    /* ============================================================
       CASE B: 分类页 / 紧凑列表 (Compact Layout) - 核心修复区
       ============================================================ */
    
    /* 1. 首先，禁止 Compact 模式下的 article 动！(防止双重动画或幽灵动画) */
    .article-list--compact article {
        animation: none !important; 
        opacity: 1 !important; /* 保持可见，因为我们要动的是里面的儿子 */
    }

    /* 2. 这里的“框”是内部的 .article-link，让它动！ */
    .article-list--compact article .article-link {
        /* 强制变成 Flex 盒子，确保背景和边框能跟着位移 */
        display: flex !important; 
        width: 100%;
        box-sizing: border-box !important;
        
        /* 挂载动画 */
        animation: cascade-reveal 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
        
        /* 渲染优化：防止框肉分离 */
        will-change: transform, opacity;
        backface-visibility: hidden;
        perspective: 1000px;
        
        /* 初始状态 */
        opacity: 0;
    }

    /* ============================================================
       阶梯延迟设置 (Delays)
       必须分别对应：普通模式的 article，和紧凑模式的 .article-link
       ============================================================ */
    
    /* 第 1 个 */
    .article-list:not(.article-list--compact) article:nth-child(1),
    .article-list--compact article:nth-child(1) .article-link 
    { animation-delay: 0.4s; }

    /* 第 2 个 */
    .article-list:not(.article-list--compact) article:nth-child(2),
    .article-list--compact article:nth-child(2) .article-link 
    { animation-delay: 0.8s; }

    /* 第 3 个 */
    .article-list:not(.article-list--compact) article:nth-child(3),
    .article-list--compact article:nth-child(3) .article-link 
    { animation-delay: 1.2s; }

    /* 第 4 个 */
    .article-list:not(.article-list--compact) article:nth-child(4),
    .article-list--compact article:nth-child(4) .article-link 
    { animation-delay: 1.6s; }

    /* 第 5 个 */
    .article-list:not(.article-list--compact) article:nth-child(5),
    .article-list--compact article:nth-child(5) .article-link 
    { animation-delay: 2.0s; }
    
    /* 后续统一 */
    .article-list:not(.article-list--compact) article:nth-child(n+6),
    .article-list--compact article:nth-child(n+6) .article-link 
    { animation-delay: 2.4s; }


    .sidebar {
        animation: cascade-reveal 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) both;
    }

    /* 如果你想让侧边栏里的 菜单、Widget 也一个接一个出来 */
    .sidebar .site-info, 
    .sidebar .menu-social, 
    .sidebar .sidebar-widgets .widget {
        animation: cascade-reveal 0.5s ease both;
    }

    /* 侧边栏内部的时间差 */
    .sidebar .site-info             { animation-delay: 0s; }   /* 头像最先出 */
    .sidebar .menu-social           { animation-delay: 0.5s; }
    .sidebar .sidebar-widgets .widget {
        animation-delay: 1s !important; /* Widget 最后 */
    }
    
</style>